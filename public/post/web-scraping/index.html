<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Web Scraping 101 | Doug Johnson&#39;s website</title>

<meta property='og:title' content='Web Scraping 101 - Doug Johnson&#39;s website'>
<meta property='og:description' content='More and more organizations are publishing their data on the web. This is great, but often websites don’t offer an option to download a clean and complete dataset from the site. In this situation, you have two options. First, you (or some unlucky intern) can hunker down and spend a week wearing out the ‘c’ and ‘v’ keys on your keyboard as you cut and paste ad nauseam from the website to an Excel spreadsheet.'>
<meta property='og:url' content='/post/web-scraping/'>
<meta property='og:site_name' content='Doug Johnson&#39;s website'>
<meta property='og:type' content='article'><meta property='og:image' content='https://www.gravatar.com/avatar/9f47a5820df24e7aae1e744e9b53bc38?s=256'><meta property='article:section' content='Post'><meta property='article:tag' content='Scraping'><meta property='article:published_time' content='2016-08-31T00:00:00Z'/><meta property='article:modified_time' content='2016-08-31T00:00:00Z'/><meta name='twitter:card' content='summary'><meta name='twitter:site' content='@dougj8921'><meta name='twitter:creator' content='@dougj8921'>


<link href="/index.xml" rel="alternate" type="application/rss+xml" title="Doug Johnson&#39;s website" />

<link rel="stylesheet" href="/css/style.css"/><link rel='stylesheet' href='/css/custom.css'><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<link rel="canonical" href="/post/web-scraping/">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
<section class="section">
  <div class="container">
    <nav id="nav-main" class="nav">
      <div id="nav-name" class="nav-left">
        <a id="nav-anchor" class="nav-item" href="/">
          <h1 id="nav-heading" class="title is-4">Doug Johnson&#39;s website</h1>
        </a>
      </div>
      <div class="nav-right">
        <nav id="nav-items" class="nav-item level is-mobile"><a class="level-item" aria-label="about" href='/about'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="8"></line>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="github" href='https://github.com/dougj892'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="twitter" href='https://twitter.com/dougj8921'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="email" href='mailto:dougj892@gmail.com'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/doug-johnson-15a1993'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
  <script src="/js/navicon-shift.js"></script>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/scraping/">#Scraping</a>




      
    </div>
    <h2 class="subtitle is-6">August 31, 2016</h2>
    <h1 class="title">Web Scraping 101</h1>
    
    <div class="content">
      <p>More and more organizations are publishing their data on the web. This is great, but often websites don’t offer an option to download a clean and complete dataset from the site.  In this situation, you have two options.  First, you (or some unlucky intern) can hunker down and spend a week wearing out the ‘c’ and ‘v’ keys on your keyboard as you cut and paste ad nauseam from the website to an Excel spreadsheet.  Second, you can use a tool like python to automatically “scrape” the data from the website. In this blog post, I’ll demonstrate how to use python to “scrape” the names of all IDinsight staff from our website.</p>
<h2 id="step-one--check-out-the-raw-html">Step one — Check out the raw html</h2>
<p>Often, the first step in scraping a website is to get familiar with the raw html code for the site.  Let’s do this for the IDinsight staff webpage.  Open “http://idinsight.org/about/team/staff/“ in a browser and then view the raw html for this webpage.  (To do this in Safari, select “show page source” from the “develop” menu.  If you don’t see the “develop” menu, follow <a href="%22http://osxdaily.com/2011/11/03/enable-the-develop-menu-in-safari/%22">these steps</a> to add the &ldquo;develop&rdquo; menu.)</p>
<p>When you look through the html, you will see that details for each staff member is coded in an html block similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bio-info&#34;</span>&gt;
  &lt;<span style="color:#f92672">h3</span>&gt;Abhinav Gupta&lt;/<span style="color:#f92672">h3</span>&gt;
  &lt;<span style="color:#f92672">h4</span>&gt;Senior Finance and Operations Manager&lt;/<span style="color:#f92672">h4</span>&gt;
  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bio-details&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;hide&#34;</span>&gt;
    &lt;<span style="color:#f92672">h3</span>&gt;Abhinav Gupta&lt;/<span style="color:#f92672">h3</span>&gt;
    &lt;<span style="color:#f92672">p</span>&gt;
      &lt;<span style="color:#f92672">p</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mailto:abhinav.gupta@idinsight.org&#34;</span>&gt;abhinav.gupta@IDinsight.org&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">p</span>&gt;
      &lt;<span style="color:#f92672">p</span>&gt;Abhinav is a Senior Finance and Operations Manager at IDinsight’s India office. He brings more than eight years of financial advisory and consulting experience in India and U.K.&lt;/<span style="color:#f92672">p</span>&gt;
      &lt;<span style="color:#f92672">p</span>&gt;Prior to joining IDinsight, Abhinav was a Manager with the M&amp;amp;A Transaction Services department of Deloitte in India. As a consultant, he advised clients across several sectors in infrastructure, telecommunications, retail and e-commerce.&lt;/<span style="color:#f92672">p</span>&gt;
      &lt;<span style="color:#f92672">p</span>&gt;Abhinav holds a master&amp;#8217;s degree in Economics from University of Cambridge, UK and is a qualified Chartered Accountant from Institute of Chartered Accountants of England and Wales.&lt;/<span style="color:#f92672">p</span>&gt;
    &lt;/<span style="color:#f92672">p</span>&gt;
  &lt;/<span style="color:#f92672">div</span>&gt;
&lt;/<span style="color:#f92672">div</span>&gt;
</code></pre></div><p>This suggests that if we want to get the names of each staff member, one strategy would be to search through the html code for each block of code starting with “&lt;div class=&quot;bio-info”&gt;” and then search inside these code blocks for the text inside the html tags <!-- raw HTML omitted --> and <!-- raw HTML omitted -->.</p>
<h2 id="step-2---use-beautifulsoup-to-parse-the-html">Step 2 - Use BeautifulSoup to parse the html</h2>
<p>The python package “requests” allows you to download the html code from a webpage and the python package “BeautifulSoup” parses the html from a webpage so that you can easily find specific code blocks.  The following python code downloads and parses the html for the IDinsight staff page.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># import the packages that we will need to scrape the website.</span>
<span style="color:#75715e"># The BeautifulSoup package helps parse html</span>
<span style="color:#f92672">from</span> bs4 <span style="color:#f92672">import</span> BeautifulSoup
<span style="color:#75715e"># The requests package just downloads the html</span>
<span style="color:#f92672">import</span> requests

<span style="color:#75715e"># download the html for the idinsight staff webpage</span>
response <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;http://idinsight.org/about/team/staff/&#34;</span>)
<span style="color:#75715e"># parse the html using the BeautifulSoup function</span>
soup <span style="color:#f92672">=</span> BeautifulSoup(response<span style="color:#f92672">.</span>content, <span style="color:#e6db74">&#34;lxml&#34;</span>)
</code></pre></div><h2 id="step-3---use-beautifulsoup-to-search-the-parsed-html">Step 3 - Use BeautifulSoup to search the parsed html</h2>
<p>Now, we want to search the parsed code for code blocks starting with “&lt;div class=&quot;bio-info”&gt;” and search inside these code blocks for the text inside the html tags <!-- raw HTML omitted --> and <!-- raw HTML omitted -->.  The following python code performs these operations.  BeautifulSoup is a little tricky, so I’m not going to explain this code in detail, but as you can see it is quite powerful.  For more on the BeautifulSoup package see <a href="%22https://www.crummy.com/software/BeautifulSoup/bs4/doc/%22">here</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># use the BeautifulSoup function &#39;findall&#39; to get a collection of div tags with the class &#39;bio-info&#39;</span>
bios <span style="color:#f92672">=</span> soup<span style="color:#f92672">.</span>findAll(<span style="color:#e6db74">&#39;div&#39;</span>, {<span style="color:#e6db74">&#39;class&#39;</span>:<span style="color:#e6db74">&#34;bio-info&#34;</span>})
<span style="color:#75715e"># for each of the div tags with class &#39;bio-info&#39;, search for the h3 tag and get the contents of this tag</span>
names <span style="color:#f92672">=</span> [bio<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;h3&#39;</span>)<span style="color:#f92672">.</span>contents[<span style="color:#ae81ff">0</span>] <span style="color:#66d9ef">for</span> bio <span style="color:#f92672">in</span> bios]
</code></pre></div><p>Lastly, we can use the following python code to check that we successfully scraped all staff names.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># print names of all staff</span>
<span style="color:#66d9ef">for</span> person <span style="color:#f92672">in</span> names:
  <span style="color:#66d9ef">print</span>(person)
</code></pre></div><p>Voila!  We&rsquo;re done.  For a more advanced example of web scraping, this <a href="%22https://github.com/dougj892/Jupyter-notebooks/blob/master/Scraping%203ie_v3.ipynb%22">link</a> includes code that downloads all the metadata for all of the studies in the 3ie impact evaluation repository.  (If you just want the full dataset of all the metadata, let me know and I can share it with you.)</p>

      
      <div class="related">
</div>
      
    </div>
    
  </div>
</section>

    <script src="/js/copycode.js"></script>


<section class="section">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
  
    <div id="show_comments"><a id="load_comments" class="button is-link">Load comments</a></div>
  
    <script type="text/javascript">
      var disqus_shortname = 'shortname';
      function disqus() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }
  
      
      var hash = window.location.hash.substr(1);
      if ((hash.length > 8) && (hash.substring(0, 8) === "comment-")) {
        disqus();
        document.getElementById("show_comments").style.display = "none";
      } else {
        document.getElementById('load_comments').onclick = function() {
          disqus();
          document.getElementById("show_comments").style.display = "none";
        };
      }
  

    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p>&copy; <a href="https://github.com/dougj892">Doug Johnson</a> 2020. Site design by <a href="https://github.com/ribic">Emir Ribic</p>
    
      <p>Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/ribice/kiss">Kiss</a>.</p>
    
  </div>
</section>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-1723694-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="\/\/matomo.example.com\/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript>
  <img src="//matomo.example.com/piwik.php?idsite=1&amp;rec=1" style="border:0" alt="" />
</noscript>

<script>
    (function(f, a, t, h, o, m){
        a[h]=a[h]||function(){
            (a[h].q=a[h].q||[]).push(arguments)
        };
        o=f.createElement('script'),
        m=f.getElementsByTagName('script')[0];
        o.async=1; o.src=t; o.id='fathom-script';
        m.parentNode.insertBefore(o,m)
    })(document, window, '\/\/fathom.example.com\/tracker.js', 'fathom');
    fathom('trackPageview');
</script>
</body>


    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    
</html>


